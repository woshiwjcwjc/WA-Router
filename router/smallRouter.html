<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>超级小型路由</title>
    <link rel="stylesheet" href="c.css" />
</head>
<body>

<div class="center" id="home">home<Br/><a href="#left">left</a> <a href="#right">right</a></div>
<div class="center" id="left">left<Br/><a href="#home">back</a></div>
<div class="center" id="right">right<Br/><a href="#home">back</a></div>

<script>

    window.onhashchange = function(){
        console.log('new hash===>'+location.hash);
        switchPage(location.hash);
    };
    window.onload = function(){
        switchPage(location.hash);
    };

    function switchPage(newPageId){
        newPageId = newPageId.substring(1);
        var newPage = document.getElementById(newPageId);
        if(newPageId && newPage){
            var currPages = document.getElementsByClassName('currPage');
            if(currPages.length > 0){
                for(var p = 0;p<currPages.length;p++){
                    console.log("p="+p);
                    if(newPageId !== currPages[p].id){
                        console.log(currPages[p].className.replace(/^(currPage) | (currPage) | (currPage)$/g, ''));
                        currPages[p].className = currPages[p].className.replace(/^(currPage) | (currPage) | (currPage)$/g, '');
                    }
                }
            }
            if(newPage && !/^(currPage) | (currPage) | (currPage)$/.test(newPage.className)){
                newPage.className += " currPage";
            }
        }
    }

//    var a = document.getElementById("home");
//    console.log(a.className);

</script>
</body>
</html>